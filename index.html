<script>
const csvURL = 'YOUR_PUBLISHED_CSV_LINK_HERE'; // आपको replace करना है

let sheetData = [];

fetch(csvURL)
  .then(res => res.text())
  .then(text => {
    sheetData = text.trim().split('\n').map(r => r.split(','));
    console.log("Sheet data loaded", sheetData.length, "rows");
  })
  .catch(err => console.error("CSV load Error:", err));

function searchData() {
  const roll = document.getElementById("rollNo").value.trim().toLowerCase();
  if (!roll) { alert("Please enter Roll No"); return; }

  if (!sheetData.length) { alert("Sheet data not loaded yet"); return; }

  const headers = sheetData[0].map(h => h.trim().toLowerCase());
  const rollIdx = headers.indexOf("roll no");

  if (rollIdx === -1) { alert("Roll No column not found in sheet header"); return; }

  const row = sheetData.slice(1).find(r => r[rollIdx]?.trim().toLowerCase() === roll);

  if (row) {
    console.log("Row found:", row);
    // अब तालिका दिखाएँ या PDF download button दिखाएँ
  } else {
    alert("Roll No not found!");
  }
}
</script>
